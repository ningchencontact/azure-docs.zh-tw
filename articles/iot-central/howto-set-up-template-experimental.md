---
title: 在 Azure IoT Central 應用程式中設定裝置範本 | Microsoft Docs
description: 了解如何使用量測、設定、屬性、規則和儀表板來設定裝置範本。
author: viv-liu
ms.author: viviali
ms.date: 01/30/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: b5ec8df9ff08aace69680c188f9ab05e944ce891
ms.sourcegitcommit: 3aa0fbfdde618656d66edf7e469e543c2aa29a57
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/05/2019
ms.locfileid: "55734567"
---
# <a name="set-up-a-device-template-new-ui-design"></a>設定裝置範本 (新 UI 設計)

裝置範本是一份藍圖，可為連線至 Azure IoT Central 應用程式的某種裝置，定義其所具有的特性和行為。

例如，建置者可為 IoT 連線風扇建立包含下列項目的裝置範本：

- 溫度遙測量測

- 風扇馬達錯誤事件量測

- 風扇運轉狀態量測

- 風扇速度設定

- 位置屬性

- 可傳送警示的規則

- 可讓您檢視裝置整體的儀表板

透過此裝置範本，操作員可以使用 **fan-1** 和 **fan-2** 等名稱，建立真實的風扇裝置並將其連網。 所有這些風扇都有量測、設定、屬性、規則和儀表板，可供應用程式使用者監視和管理。

> [!NOTE]
> 只有建置者和系統管理員可以建立、編輯和刪除裝置範本。 任何使用者都可以在 [Device Explorer] 頁面，透過現有裝置範本來建立裝置。

[!INCLUDE [iot-central-experimental-note](../../includes/iot-central-experimental-note.md)]

## <a name="create-a-device-template"></a>建立裝置範本

1. 瀏覽至 [裝置範本] 頁面。

2. 若要建立空白範本，請按一下 [+]，然後為您的新裝置範本輸入名稱，如**冰箱**。 然後，選取 [建立]：

   ![範本名稱為 "Refrigerator" 的裝置詳細資料頁面](./media/howto-set-up-template-experimental/devicedetailspage.png)

4. 您現在位在新裝置範本的 [裝置詳細資料] 頁面。 當您建立裝置範本時，IoT Central 會自動建立模擬裝置。 模擬裝置可讓您在連線實際裝置之前，先測試您應用程式的行為。

下列小節描述 [裝置範本] 頁面上的每個索引標籤。

## <a name="measurements"></a>量測

量測是來自裝置的資料。 您可以在裝置範本中新增多個量測，以符合裝置的功能。

- **遙測**量測是您裝置隨著時間收集的資料點。 這些資料點會以連續資料流的形式呈現。 例如，溫度。
- **事件**量測是時間點資料，代表裝置上某個重要的事物。 嚴重性層級代表事件的重要性。 例如，風扇馬達錯誤。
- **狀態**量測代表裝置或其元件在一段時間內的狀態。 例如，風扇模式可定義為具有 [運轉中] 和 [已停止] 這兩種可能的狀態。

### <a name="create-a-telemetry-measurement"></a>建立遙測量測

若要新增遙測度量，請按一下 [+ 新增度量]，選擇 [遙測] 為度量類型，然後在表單上輸入詳細資料。

> [!NOTE]
> 裝置範本中的欄位名稱必須符合對應裝置程式碼中的屬性名稱，才能在實際的裝置連線時，讓遙測量測顯示在應用程式中。 隨著您繼續在後續幾節定義裝置範本，以設定各項設定、裝置屬性和命令時，請採取相同的做法。

例如，您可以新增溫度遙測量測：

| 顯示名稱        | 欄位名稱    |  Units    | Min   |max|
| --------------------| ------------- |-----------|-------|---|
| 溫度         | temp          |  degC     |  0    |100|

![含溫度量測詳細資料的 [建立遙測] 表單](./media/howto-set-up-template-experimental/measurementsform.png)

按一下 [儲存] 之後，[溫度] 度量就會出現在度量清單中。 一小段時間之後，您會看到來自模擬裝置的溫度資料視覺效果。

> [!NOTE]
> 遙測量測的資料類型為浮點數。

### <a name="create-an-event-measurement"></a>建立事件量測

若要新增事件度量，請按一下 [+ 新增度量]，選取 [事件] 為度量類型。 在 [建立事件] 表單上輸入詳細資料。

提供事件的 [顯示名稱]、[欄位名稱] 及 [嚴重性]。 您可以從三個可用的嚴重性層級選擇：[錯誤]、[警告] 和 [資訊]。

例如，您可以新增 [風扇馬達錯誤] 事件。

| 顯示名稱        | 欄位名稱    |  預設嚴重性 |
| --------------------| ------------- |-----------|
| 風扇馬達錯誤     | fanmotorerror |  Error    |

![含風扇馬達事件詳細資料的 [建立事件] 表單](./media/howto-set-up-template-experimental/eventmeasurementsform.png)

按一下 [儲存] 之後，[風扇馬達錯誤] 度量就會出現在度量清單中。 一小段時間之後，您會看到來自模擬裝置的事件資料視覺效果。

若要檢視事件的更多詳細資料，請按一下圖表上的事件圖示：

![[風扇馬達錯誤] 事件的詳細資料](./media/howto-set-up-template-experimental/eventmeasurementsdetail.png)

> [!NOTE]
> 事件度量的資料類型為字串。

### <a name="create-a-state-measurement"></a>建立狀態量測

若要新增狀態度量，請按一下 [+ 新增度量]，選取 [狀態] 為度量類型。 在 [建立狀態] 表單上輸入詳細資料。

提供狀態之 [顯示名稱]、[欄位名稱] 及 [值] 的詳細資料。 每個值也可以有顯示名稱，當值顯示在圖表和資料表上時，便會使用該顯示名稱。

例如，您可以新增 [風扇模式] 狀態，使其包含兩個可由裝置傳送的可能值，分別是 [運轉中] 和 [已停止]。

| 顯示名稱 | 欄位名稱    |  值 1   | 顯示名稱 | 值 2    |顯示名稱  | 
| -------------| ------------- |----------- | -------------| -----------| -------------|
| 風扇模式     | fanmode       |  1         | 運作中    |     0      | 已停止      |

![含風扇模式詳細資料的 [編輯狀態] 表單](./media/howto-set-up-template-experimental/statemeasurementsform.png)

按一下 [儲存] 之後，[風扇模式] 狀態度量就會出現在度量清單中。 一小段時間之後，您會看到來自模擬裝置的狀態資料視覺效果。

如果裝置短時間內傳送太多資料點，狀態度量會以其他視覺效果顯示。 按一下圖表以按照時間順序檢視該時間週期內的所有資料點。 您也可以縮小時間範圍，以查看圖表上所繪製的量測。

> [!NOTE]
> 狀態度量的資料類型為字串。

## <a name="settings"></a>設定

設定可控制裝置。 它們可讓操作員對裝置提供輸入。 您可以在裝置範本中新增多個設定，這些設定會在 [設定] 索引標籤上顯示為圖格供操作員使用。 您可以新增許多種設定：數字、文字、日期、切換、挑選清單及區段標籤。

設定的狀態可為三者其中之一。 裝置會回報下列狀態。

- **已同步處理**：裝置已變更來反映設定值。

- **Pending**：裝置目前正在變更為設定值。

- **錯誤**：裝置傳回錯誤。

例如，若要新增風扇速度設定，您可以按一下 [設定] 並在新的 [數字] 設定中輸入：

| 顯示名稱  | 欄位名稱    |  Units  | 小數位數 |Initial|
| --------------| ------------- |---------| ---------|---- |
| 風扇速度     | fanSpeed      | RPM     | 2        | 0   |

![含速度設定詳細資料的 [設定數字] 表單](./media/howto-set-up-template-experimental/settingsform.png)

選取 [儲存] 之後，[風扇速度] 設定會顯示為圖格。 操作員可以使用 [Device Explorer] 頁面上的設定來變更裝置的風扇速度。

## <a name="properties"></a>properties

屬性是與裝置相關聯的中繼資料，例如裝置位置和序號。 在裝置範本中新增多個屬性之後，這些屬性會在 [屬性] 索引標籤上顯示為圖格。屬性可以有類型，例如數字、文字、日期、切換、裝置屬性、標籤或位置。 操作員可以在建立裝置時指定屬性值，並可隨時編輯這些值。 裝置屬性是唯讀的，而且會從裝置傳送至應用程式。 操作員無法變更裝置屬性。 當實際裝置連線時，裝置屬性圖格會在應用程式中更新。

屬性分為兩種類別：

- 「裝置屬性」，裝置會向 IoT Central 應用程式報告這些屬性。 裝置屬性是由裝置報告的唯讀值，並且會在實際裝置連線時，在應用程式中更新。
- 「應用程式屬性」，這些屬性儲存在應用程式中，並可供操作員編輯。 裝置無法辨識應用程式屬性。

比方說，您可以在 [屬性] 索引標籤上，將裝置上次維修的日期新增為 [日期] 屬性 (應用程式屬性)：

| 顯示名稱  | 欄位名稱 | 初始值   |
| --------------| -----------|-----------------|
| 上次維修日期      | lastServiced        | 2019/01/29     |

![[屬性] 索引標籤上的設定 [上次維修]](./media/howto-set-up-template-experimental/propertiesform.png)

選取 [儲存] 之後，裝置的上次維修日期會顯示為圖格。

建立圖格之後，您可以在 [Device Explorer] 中變更應用程式屬性值。

### <a name="create-a-location-property-through-azure-maps"></a>透過 Azure 地圖服務建立位置屬性

您可以在 Azure IoT Central 中將地理內容提供給位置資料，然後繪製街道地址的任何經緯度座標地圖。 或是繪製經緯度座標地圖。 「Azure 地圖服務」會在 IoT Central 中啟用這項功能。

您可以新增兩種類型的位置屬性：

- **位置作為應用程式屬性** (此屬性儲存在應用程式中)。 裝置無法辨識應用程式屬性。
- **將位置新增為裝置屬性**：裝置會向應用程式回報此屬性。

#### <a name="add-location-as-an-application-property"></a>將位置新增為應用程式屬性

您可以在 IoT Central 應用程式中使用「Azure 地圖服務」來建立位置屬性作為應用程式屬性。 例如，您可以新增裝置安裝地址：

1. 瀏覽至 [屬性] 索引標籤。

2. 在資源庫中，選取 [位置]。

3. 設定位置的 [顯示名稱]、[欄位名稱] 及 (選擇性) [初始值]。

    | 顯示名稱  | 欄位名稱 | 初始值 |
    | --------------| -----------|---------| 
    | 安裝地址 | installAddress | Microsoft, 1 Microsoft Way, Redmond, WA 98052   |

   ![含位置詳細資料的 [設定位置] 表單](./media/howto-set-up-template-experimental/locationcloudproperty2.png)

   新增位置有兩種支援的格式：
   - **以地址新增位置**
   - **以座標新增位置**

4. 按一下 [檔案] 。 操作員可以在 [Device Explorer] 中更新位置值。

#### <a name="add-location-as-a-device-property"></a>將位置新增為裝置屬性

您可以將位置屬性建立成裝置會回報的裝置屬性。 例如，如果您想要追蹤裝置位置：

1. 瀏覽至 [屬性] 索引標籤。

2. 從資源庫中選取 [裝置屬性]。

3. 設定顯示名稱和欄位名稱，然後選取 [位置] 作為資料類型：

    | 顯示名稱  | 欄位名稱 | 資料類型 |
    | --------------| -----------|-----------|
    | 裝置位置 | deviceLocation | location  |

   > [!NOTE]
   > 欄位名稱必須符合對應裝置程式碼中的屬性名稱

   ![含位置詳細資料的 [設定裝置屬性] 表單](./media/howto-set-up-template-experimental/locationdeviceproperty2.png)

實際裝置連線之後，您新增為裝置屬性的位置會更新為裝置所傳送的值。 既然您已設定位置屬性，現在即可[在裝置儀表板中新增地圖來以視覺化方式呈現位置](#add-an-azure-maps-location-in-the-dashboard)。

## <a name="commands"></a>命令

命令可用來從遠端管理裝置。 它們可讓操作員在裝置上執行命令。 您可以在裝置範本中新增多個命令，這些命令會在 [命令] 索引標籤上顯示為圖格，以供操作員使用。 身為裝置建置者，您可以有彈性地根據需求定義命令。

命令與設定有何不同？

* **設定**：設定是您想要套用至裝置的組態。 您想要裝置維持該組態直到您變更它。 例如，您想要設定冰箱的溫度，並且希望即使冰箱重新啟動也保有該設定。

* **命令**：您會使用命令從 IoT Central 自遠端在裝置上立即執行命令。 如果裝置未連線，命令就會逾時並失敗。 例如，您想要重新啟動某個裝置。

例如，若要新增**回應**命令，您可以選取 [命令] 索引標籤，然後按一下 [+ 新增命令] 並輸入新命令的詳細資料：

| 顯示名稱  | 欄位名稱 | 預設逾時 | 資料類型 |
| --------------| -----------|---------------- | --------- |
| 回應命令  | 回應       |  30             | text      |

![含回應詳細資料的 [設定命令] 表單](./media/howto-set-up-template-experimental/commandsecho.png)

選取 [儲存] 之後，**回應**命令會顯示為圖格，當您的實際裝置連線時，就能從 [Device Explorer] 使用它。 命令的欄位名稱必須符合對應裝置程式碼中的屬性名稱，命令才能順利執行。

## <a name="rules"></a>規則

規則可讓操作員近乎即時地監視裝置。 規則會在觸發規則時自動叫用動作，例如傳送電子郵件。 目前有一種類型的規則可供使用：

- **遙測規則**：當所選裝置的遙測超出指定閾值時，便會觸發此規則。 [深入了解遙測規則](howto-create-telemetry-rules-experimental.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json)。

## <a name="dashboard"></a>儀表板

儀表板可供操作員查看裝置的相關資訊。 身為建置者，您可以在此頁面新增圖格，以協助操作員了解裝置的運作情形。 您可以在裝置範本中新增多個儀表板圖格。 您可以新增許多種儀表板圖格，如影像、折線圖、橫條圖、關鍵效能指標 (KPI)、設定和屬性，以及標籤。

例如，您可以從資源庫中選取 [儀表板]，然後選取 [設定及屬性] 圖格來新增該圖格，以顯示目前選取的設定和屬性值：

![含設定和屬性詳細資料的 [設定裝置詳細資料] 表單](./media/howto-set-up-template-experimental/dashboardsettingsandpropertiesform.png)

現在當操作員在 [Device Explorer] 中檢視儀表板時，他們可以看到該圖格。

### <a name="add-an-azure-maps-location-in-the-dashboard"></a>在儀表板中新增 Auzre 地圖服務位置

如果您設定位置屬性，就可以使用您的裝置儀表板將位置視覺化。

1. 瀏覽至 [儀表板] 索引標籤。

1. 在 [裝置儀表板] 上，從資源庫中選取 [地圖]。

1. 提供地圖的標題。 下列範例的標題是 [安裝位置]。 然後選擇您先前在 [屬性屬性] 索引標籤上設定的位置。在下列範例中，已選取 [安裝地址]。

   ![含標題和屬性詳細資料的 [設定地圖] 表單](./media/howto-set-up-template-experimental/locationcloudproperty5map.png)

4. 選取 [ **儲存**]。 地圖圖格現在會顯示您選取的位置。

您可以將地圖調整為所需的大小。 現在當操作員在 [Device Explorer] 中檢視儀表板時，您已設定的所有儀表板圖格 (包含位置地圖) 都會顯示。

## <a name="next-steps"></a>後續步驟

了解如何在 Azure IoT Central 應用程式中設定裝置範本之後，現在就可以：

> [!div class="nextstepaction"]
> [建立新的裝置範本版本](howto-version-devicetemplate.md?toc=/azure/iot-central-experimental/toc.json&bc=/azure/iot-central-experimental/breadcrumb/toc.json)
