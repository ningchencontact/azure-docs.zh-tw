---
title: Azure database for PostgreSQL-單一伺服器的定價層
description: 這篇文章會說明適用於 Azure Database for PostgreSQL-單一伺服器的定價層。
author: jan-eng
ms.author: janeng
ms.service: postgresql
ms.topic: conceptual
ms.date: 5/6/2019
ms.openlocfilehash: 5f60a2786a87f4bd9be1f4a9e2a7a222e097b2e1
ms.sourcegitcommit: f56b267b11f23ac8f6284bb662b38c7a8336e99b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/28/2019
ms.locfileid: "67448068"
---
# <a name="pricing-tiers-in-azure-database-for-postgresql---single-server"></a>在 Azure Database for PostgreSQL-單一伺服器的定價層

您可以在下列三個不同定價層其中之一建立「適用於 PostgreSQL 的 Azure 資料庫」伺服器：「基本」、「一般用途」及「記憶體最佳化」。 定價層的差別在於虛擬核心中可佈建的計算數量、每個虛擬核心的記憶體，以及用來儲存資料的儲存體技術。 所有資源都會佈建在 PostgreSQL 伺服器層級。 一個伺服器可以有一個或多個資料庫。

|    | **基本** | **一般用途** | **記憶體最佳化** |
|:---|:----------|:--------------------|:---------------------|
| 計算世代 | Gen 4、Gen 5 | Gen 4、Gen 5 | Gen 5 |
| 虛擬核心 | 1, 2 | 2、4、8、16、32、64 |2、4、8、16、32 |
| 每個虛擬核心的記憶體 | 2 GB | 5 GB | 10 GB |
| 儲存體大小 | 5 GB 至 1 TB | 5 GB 至 4 TB | 5 GB 至 4 TB |
| 儲存體類型 | Azure 標準儲存體 | Azure 進階儲存體 | Azure 進階儲存體 |
| 資料庫備份的保留期限 | 7 至 35 天 | 7 至 35 天 | 7 至 35 天 |

若要選擇定價層，請從下表著手。

| 定價層 | 目標工作負載 |
|:-------------|:-----------------|
| 基本 | 需要輕量計算和 I/O 效能的工作負載。 範例包括用於開發或測試的伺服器，或者不常使用的小規模應用程式。 |
| 一般用途 | 需要平衡的計算和記憶體以及可擴充 I/O 輸送量的大多數商務工作負載。 範例包括用於裝載 Web 和行動應用程式的伺服器，以及其他企業應用程式。|
| 記憶體最佳化 | 需要記憶體內效能來提供更快速交易處理和更高並行性的高效能資料庫工作負載。 範例包括用於處理即時資料的伺服器，以及高效能交易式或分析應用程式。|

建立伺服器之後，虛擬核心數目、硬體世代和定價層 (基本層的來回除外) 可在幾秒內上下變動。 您可以也單獨調高儲存體的數量及延長或縮短備份保留期限，而無須中斷應用程式。 但您無法在建立伺服器之後，變更備份儲存體類型。 如需詳細資訊，請參閱[調整資源](#scale-resources)一節。

## <a name="compute-generations-and-vcores"></a>計算世代和虛擬核心

計算資源會以 vCore 的形式提供，vCore 代表了基礎硬體的邏輯 CPU。 中國東部 1、 中國北部 1、 美國 DoD 中部和美國 DoD 東部利用第 4 代邏輯 Cpu 的基礎 Intel E5 2673 v3 (Haswell) 2.4-GHz 處理器。 其他所有區域都利用 Gen 5 邏輯 Cpu 的基礎 Intel E5 2673 v4 (Broadwell) 2.3-GHz 處理器。

## <a name="storage"></a>儲存體

您佈建的儲存體是「適用於 PostgreSQL 伺服器的 Azure 資料庫」可用的儲存體容量。 儲存體會用於資料庫檔案、暫存檔案、交易記錄和 PostgreSQL 伺服器記錄。 您佈建的儲存體總數也會定義您伺服器可用的 I/O 容量。

|    | **基本** | **一般用途** | **記憶體最佳化** |
|:---|:----------|:--------------------|:---------------------|
| 儲存體類型 | Azure 標準儲存體 | Azure 進階儲存體 | Azure 進階儲存體 |
| 儲存體大小 | 5 GB 至 1 TB | 5 GB 至 4 TB | 5 GB 至 4 TB |
| 儲存體遞增大小 | 1 GB | 1 GB | 1 GB |
| IOPS | 變數 |3 IOPS/GB<br/>最小值為 100 IOPS<br/>最大值為 6000 IOPS | 3 IOPS/GB<br/>最小值為 100 IOPS<br/>最大值為 6000 IOPS |

您可以新增額外的儲存體容量，期間或之後建立的伺服器，並允許成長自動根據您的工作負載的儲存體耗用量的儲存體系統。 基本層不提供 IOPS 保證。 在一般用途和記憶體最佳化定價層中，IOPS 與佈建的儲存體大小會以 3:1 的比例調整。

您可以在 Azure 入口網站或使用 Azure CLI 命令來監視 I/O 耗用量。 要監視的相關計量包括[儲存體限制、儲存體百分比、已使用的儲存體和 IO 百分比](concepts-monitoring.md)。

### <a name="large-storage-preview"></a>大型的儲存體 （預覽）

在我們的一般用途和記憶體最佳化層中，我們會提高儲存體限制。 新建立的伺服器的選用功能的預覽可以佈建最多可達 16 TB 的儲存體。 3:1 比例調整的 IOPS 最多 20,000 個 IOPS。 如同目前正式運作的儲存體中，您可以在伺服器上，建立之後新增額外的儲存體容量，並允許成長自動根據您的工作負載的儲存體耗用量的儲存體系統。

|              | **一般用途** | **記憶體最佳化** |
|:-------------|:--------------------|:---------------------|
| 儲存體類型 | Azure 進階儲存體 | Azure 進階儲存體 |
| 儲存體大小 | 32 GB 到 16 TB| 32 到 16 TB |
| 儲存體遞增大小 | 1 GB | 1 GB |
| IOPS | 3 IOPS/GB<br/>最小值為 100 IOPS<br/>20,000 IOPS 的最大 | 3 IOPS/GB<br/>最小值為 100 IOPS<br/>20,000 IOPS 的最大 |

> [!IMPORTANT]
> 大型的儲存體是目前處於公開預覽狀態，在下列區域：美國東部、 美國東部 2、 美國中部、 美國西部、 北歐、 西歐、 英國南部、 英國西部、 東南亞、 東亞、 日本東部、 日本西部、 韓國中部、 韓國南部、 澳大利亞東部、 澳洲南部東部。
>
> 目前不支援大型儲存體預覽：
>
> * 透過虛擬網路服務端點的連入連線
> * 異地備援備份
> * 讀取複本

### <a name="reaching-the-storage-limit"></a>到達儲存體限制

具有少於 100 GB 佈建儲存體的伺服器會標示為唯讀的可用儲存體是否小於 512 MB 或 5%的已佈建的儲存體大小。 具有多個佈建 100 GB 的儲存空間的伺服器會標示為唯讀時，才可用的儲存體小於 5 GB。

例如，如果您已佈建的儲存體，110 GB，而且實際使用率超過 105 GB，伺服器會標示為唯讀。 或者，如果您已佈建 5 GB 的儲存體，伺服器會標示為唯讀時可用的存放裝置到達少於 512 MB。

當伺服器設定為唯讀時，所有現有的工作階段都將中斷連接，並且回復未認可的交易。 任何後續的寫入作業和交易認可均失敗。 所有後續的讀取查詢將不會中斷。  

您可以增加伺服器的已佈建儲存體數量，也可以讀寫模式啟動新的工作階段，並刪除資料以回收可用的儲存體。 執行 `SET SESSION CHARACTERISTICS AS TRANSACTION READ WRITE;` 會將目前工作階段設定為讀取寫入模式。 為了避免資料損毀，請勿在伺服器仍處於唯讀狀態時執行任何寫入作業。

我們建議您開啟儲存體自動成長，或若要設定警示，您的伺服器儲存體已接近閾值時通知您因此您可以避免進入唯讀狀態。 如需詳細資訊，請參閱[如何設定警示](howto-alert-on-metric.md)的文件。

### <a name="storage-auto-grow"></a>儲存體自動成長

儲存體自動成長，才會啟用，存放裝置會自動成長而不會影響工作負載。 針對具有小於 100 GB 佈建儲存體的伺服器，佈建的儲存體大小會增加 5 GB 的可用儲存體未達 1 GB 或 10%的已佈建的儲存體的較大者為。 針對具有超過 100GB 的佈建的儲存體的伺服器，佈建的儲存體大小會增加 5%，低於佈建儲存體大小的 5%的可用儲存空間時。 如上述所指定的最大儲存體限制會套用。

例如，如果您已佈建 1000 GB 的儲存體，以及實際的使用率超過 950 GB，伺服器儲存體大小會增加至 1050 GB。 或者，如果您已佈建 10 GB 的儲存體，儲存體大小是增加到 15GB 免費小於 1 GB 的儲存體時。

## <a name="backup"></a>Backup

服務會自動採用伺服器的備份。 備份的最小保留期限是七天。 您可以設定的保留期限最多為 35 天。 在伺服器的存留期期間，您可以在任何時間點調整保留期限。 您可以選擇本地備援和異地備援備份。 異地備援備份也會儲存在您伺服器所在建立區域的[地理配對區域](https://docs.microsoft.com/azure/best-practices-availability-paired-regions)中。 此備援能力可在發生災害時提供一層保護。 您也可讓伺服器還原到其他任何 Azure 區域，只要其中的服務可使用異地備援備份。 建立伺服器之後，便無法在兩個備份儲存體選項之間做變更。

## <a name="scale-resources"></a>調整資源

建立伺服器之後，您可以單獨變更虛擬核心、硬體世代、定價層 (基本層的來回除外)、儲存體數量及備份保留期限。 但您無法在建立伺服器之後，變更備份儲存體類型。 虛擬核心數目可相應增加或減少。 備份保留期可在 7 到 35 天的範圍內相應增加或減少。 儲存體大小只能增加。 您可以透過入口網站或 Azure CLI 來調整資源。 如需使用 Azure CLI 進行調整的範例，請參閱[使用 Azure CLI 來監視和調整適用於 PostgreSQL 的 Azure 資料庫伺服器](scripts/sample-scale-server-up-or-down.md)。

當您變更虛擬核心數目、硬體世代或定價層時，系統會以新的計算配置建立一個原始伺服器複本。 當新伺服器已啟動並執行之後，連線就會切換到新的伺服器。 在系統切換到新伺服器的期間，您無法建立任何新的連線，且所有未認可的交易皆會復原。 此期間長短可能有所不同，但大部分情況下是少於一分鐘。

調整儲存體和變更備份保留期限完全是線上作業。 運作不會中斷，您的應用程式也不會受到影響。 由於 IOPS 會隨著佈建的儲存體大小進行調整，您可以透過相應增加儲存體來增加伺服器可用的 IOPS。

## <a name="pricing"></a>價格

如需最新的定價資訊，請參閱服務的[定價頁面](https://azure.microsoft.com/pricing/details/PostgreSQL/)。 若要查看您所需的設定成本，[Azure 入口網站](https://portal.azure.com/#create/Microsoft.PostgreSQLServer)會根據您選取的選項，在 [定價層]  索引標籤中顯示每月成本。 如果您沒有 Azure 訂用帳戶，則可以使用 Azure 價格計算機來取得估計的價格。 在 [Azure 價格計算機](https://azure.microsoft.com/pricing/calculator/)網站上，選取 [新增項目]  展開 [資料庫]  類別，然後選擇 [適用於 PostgreSQL 的 Azure 資料庫]  以自訂選項。

## <a name="next-steps"></a>後續步驟

- 深入了解如何[在入口網站中建立 PostgreSQL 伺服器](tutorial-design-database-using-azure-portal.md)。
- 了解[服務限制](concepts-limits.md)。 
- 了解如何[使用讀取複本來擴充 (服務)](howto-read-replicas-portal.md)。
